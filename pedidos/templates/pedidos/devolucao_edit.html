<p><a class="btn btn-outline-primary btn-sm" href="{% url 'devolucoes_edit' pedido.codpedido %}" role="button"><i
            class="bi bi-calendar-plus"></i>&nbsp;Alterar Lista de Produtos Devolvidos</a></p>
<h5 class="text-left bg-dark text-light">Lista de produtos:</h5>

<script>
    function moveSelectedItems(fromListId, toListId) {
        const fromList = document.getElementById(fromListId);
        const toList = document.getElementById(toListId);
        const selectedItems = Array.from(fromList.querySelectorAll('input[type="checkbox"]:checked'));
        selectedItems.forEach(item => {
            const listItem = item.parentNode;
            item.checked = false;
            toList.appendChild(listItem);
        });
    }
</script>

<h1>My Lists</h1>

<div style="display: flex; gap: 16px">
    <div>
        <h2>Initial List</h2>
        <ul id="initialList">
            {% for produto in produtosdisponiveis %}
            <li>
                <input type="checkbox" name="initial_items" value="{{ produto.codproduto }}">
                {{ produto }}
            </li>
            {% endfor %}
        </ul>
    </div>
    <div>
        <h2>Selected Items</h2>
        <ul id="selectedItems">
            {% for produto in produtosdevolvidos %}
            <li>
                <input type="checkbox" name="selected_items" value="{{ produto.codproduto }}">
                {{ produto }}
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

<div style="display: flex; gap: 16px">
    <button type="button" onclick="moveSelectedItems('initialList', 'selectedItems')">Add &rarr;</button>
    <button type="button" onclick="moveSelectedItems('selectedItems', 'initialList')">&larr; Remove</button>
</div>

<form method="POST">
    {% csrf_token %}
    <input type="hidden" name="selected_items" id="selectedItemsInput">
    <button type="submit">Submit</button>
</form>

<script>
    const selectedItemsInput = document.getElementById('selectedItemsInput');
    const selectedItemsList = document.getElementById('selectedItems');
    selectedItemsList.addEventListener('change', () => {
        const selectedItems = Array.from(selectedItemsList.querySelectorAll('input[type="checkbox"]:checked'));
        const selectedIds = selectedItems.map(item => item.value);
        selectedItemsInput.value = JSON.stringify(selectedIds);
    });
</script>

<!--
<script>
    function moveSelectedItems(fromListId, toListId) {
        const fromList = document.getElementById(fromListId);
        const toList = document.getElementById(toListId);
        const selectedItems = Array.from(fromList.selectedOptions);
        selectedItems.forEach(item => {
            const listItem = item.parentNode;
            toList.appendChild(listItem);
        });
    }
</script>
<h1>My Lists</h1>

<div style="display: flex; gap: 16px">
    <div>
        <h2>Initial List</h2>
        <select multiple id="initialList" style="height: 200px">
            {% for produto in produtosdisponiveis %}
            <option value="{{ produto.codproduto }}">{{ produto }}</option>
            {% endfor %}
        </select>
    </div>
    <div>
        <h2>Selected Items</h2>
        <select multiple id="selectedItems" style="height: 200px">
            {% for produto in produtosdevolvidos %}
            <option value="{{ produto.codproduto }}">{{ produto }}</option>
            {% endfor %}
        </select>
    </div>
</div>

<div style="display: flex; gap: 16px; margin-top: 16px">
    <button type="button" onclick="moveSelectedItems('initialList', 'selectedItems')">Add &rarr;</button>
    <button type="button" onclick="moveSelectedItems('selectedItems', 'initialList')">&larr; Remove</button>
</div>

<form method="POST">
    {% csrf_token %}
    <select multiple name="selected_items" style="display: none" id="selectedItemsInput">
        {% for item in selected_items %}
        <option value="{{ item.id }}" selected>{{ item.name }}</option>
        {% endfor %}
    </select>
    <button type="submit">Submit</button>
</form>

<script>
    const selectedItemsInput = document.getElementById('InitialItens');
    const selectedItemsList = document.getElementById('selectedItems');
    selectedItemsList.addEventListener('change', () => {
        const selectedItems = Array.from(selectedItemsList.selectedOptions);
        const selectedIds = selectedItems.map(item => item.value);
        selectedItemsInput.innerHTML = '';
        selectedIds.forEach(id => {
            const option = document.createElement('option');
            option.value = id;
            option.selected = true;
            selectedItemsInput.appendChild(option);
        });
    });
</script>
-->